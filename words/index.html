<!DOCTYPE html>
<html>

<head>
  <title>从文章中背单词</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/parse/dist/parse.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
  <script src="https://unpkg.com/element-plus"></script>
  <script type="module" src="./js/app.js"></script> 
  <link rel="stylesheet" href="./css/style.css">
  <style>
.article-translation {
  /* 整体容器样式 */
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
}

h3, h4 {
  margin-bottom: 5px;
}

.selected-text, .selected-text-trans {
  background-color: #f5f5f5;
  padding: 10px;
  border-radius: 3px;
}

.word-mastery {
  margin-top: 15px;
}

.progress-bar {
  width: 100%;
  height: 10px;
  background-color: #eee;
  border-radius: 5px;
}

.progress {
  height: 100%;
  background-color: #4CAF50;
  border-radius: 5px;
  transition: width 0.3s ease;
}

.percentage {
  margin-left: 10px;
}

    .youdao {
      /* 整体容器样式 */
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    
    .separator {
      /* 分割线样式 */
      margin: 10px 0;
      border-color: #eee;
    }
    
    .exam-types span {
      /* 考试类型标签样式 */
      margin-right: 5px;
    }
    .word-translations {
      font-size: 20px;
      
      font-family: 微软雅黑, Arial, sans-serif;
    }
    .word-translations .pos {
      /* 词性样式 */
      font-weight: bold;
      margin-right: 5px;
      
    }
    
    .past-exam-sents .sent {
      /* 例句容器样式 */
      margin-bottom: 10px;
    }
    
    .past-exam-sents .en {
      /* 英文例句样式 */
      font-style: italic;
      font-size: 20px;
    }
    </style>
</head>

<body>
  <div id="app">
    <div class="container">
      <div class="column title-list">
        <button @click="addArticle">添加文章</button>
        <h3>文章列表</h3>
        <ul>
          <li v-for="article in articles" :class="{'active': selectedArticle && article.id === selectedArticle.id}" @click="selectArticle(article)">{{article.title}}</li>
        </ul>
        <h3>公开文章列表</h3>
        <ul>
          <li v-for="article in publicArticles" :class="{'active': selectedArticle && article.id === selectedArticle.id}" @click="selectArticle(article)">{{article.title}}</li>
        </ul>
      </div>
      <div class="column article-info" id="article-info">
        <h3>文章详情</h3>
        <input v-if="selectedArticle" type="text" v-model="selectedArticle.title" @change="updateArticle(selectedArticle)"  />
        <!-- <textarea v-if="selectedArticle" name="" id="" v-model="selectedArticle.content" @change="updateArticle(selectedArticle)"></textarea> -->
        <div class="content" ref="editableRef" :style="{'fontSize': fontSize + 'px'}" v-if="selectedArticle" @blur="handleBlur()" @mouseup="selectionchange" contenteditable="true" id="editable" @input="updateContent"></div>
        <div class="tools">
          <!-- <button>清理格式</button> -->
          <button @click="fontSize += 4">增大字体</button>
          <button @click="fontSize -= 2">减小字体</button>
          <button class="danger" @click="deleteArticle">删除文章</button>
          <button @click="publicArticle(selectedArticle.id)"  v-if="selectedArticle">{{selectedArticle.public ? '不公开文章' : '公开文章'}}</button>
        </div>
      </div> 
      <!-- @click="selectWord" -->
      <div class="column article-translation" id="article-translation">

        <h3>文章翻译</h3>

        <h4>选中文本：</h4>
        <p class="selected-text">{{ selectedText }}</p>
    
        <h4>选中文本翻译：</h4>
        <p class="selected-text-trans">{{ selectedTextTrans }}</p>
    
        <div v-if="selectedUserWord" class="word-mastery">
          <h4>选中单词掌握程度：</h4>
          <div class="progress-bar">
            <div class="progress" :style="{ width: `${selectedUserWord.mastery / selectedUserWord.count * 100}%` }"></div>
          </div>
          <span class="percentage">{{ (selectedUserWord.mastery / selectedUserWord.count * 100).toFixed(0) }}%</span> <br>  
          <button class="mastery" @click="toMastery(selectedUserWord.word)">现在认识了</button>
        </div>

        <div v-if="youdao" class="youdao">
          <hr class="separator">
      
          <div v-if="youdao.ec && youdao.ec.exam_type" class="exam-types">
            <span v-for="examType in youdao.ec.exam_type" :key="examType">
              {{ examType }} |
            </span>
          </div>
      
          <hr class="separator">
      
          <div v-if="youdao.ec && youdao.ec.word" class="word-translations">
            <div v-for="trs in youdao.ec.word.trs" :key="trs.pos">
              <span class="pos">{{ trs.pos }}</span>
              <span class="tran">{{ trs.tran }}</span>
            </div>
          </div>
      
          <hr class="separator">
      
          <div v-if="youdao.individual && youdao.individual.pastExamSents" class="past-exam-sents">
            <div v-for="sent in youdao.individual.pastExamSents" :key="sent.en" class="sent">
              <p class="en">{{ sent.en }}</p>
              <p class="zh">{{ sent.zh }}</p>
            </div>
          </div>
        </div>

      </div>
      <div class="column article-words" v-if="false" id="article-words">
        <h3>文章中的单词</h3>
        <table class="table">
          <thead>
          <tr>
            <th>
              顺序
            </th>
            <th>
              单词
            </th>
            <th>
              频率
            </th>
            <th>
              翻译
            </th>
            <!-- <th>
                操作
            </th> -->
          </tr>
          </thead>
          <tbody id="table-content">
          <tr v-for="(word, key) in article_word_list_no_remember">
            <td>{{word.index}}</td>
            <td class="word" @click="play2(key)" style="font-size: 20px">{{word.show ? (word.syllable ? word.syllable : key) : key}}</td>
            <td>{{word.times}}</td>
            <td class='trans' :class="{'trans-hide': !word.show}" @click="remember(key)">{{word.trans}}</td>
<!--              <td>翻开</td>-->
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <audio id="voice" src="http://dict.youdao.com/dictvoice?type=0&audio=apple"></audio>
  
</body>

</html>