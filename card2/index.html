<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>卡片界面示例</title>
    <link rel="stylesheet" href="css/s.css">
    <script src="https://unpkg.com/vue@3"></script>
</head>
<body>
    <div id="app">
        <section v-for="card in cards" :class="['card', card.color, { pick: card.isDragging }]" @dblclick="editCard(card)" 
        @click="selectCard(card)"                  
        @mousedown="startDrag(card)" 
        @mouseup="stopDrag(card)" 
        @mouseleave="stopDrag(card)" 
         :style="{ top: card.top + 'px', left: card.left + 'px' }">
            <div class="text">{{ card.text }}</div>
            <menu v-if="card.selected">
                <a href="#" class="edit" @click="editCard(card)">编辑</a>
                <a href="#" class="delete" @click="deleteCard(card)">删除</a>
            </menu>
        </section>
    </div>

    <script>
        const { createApp, ref } = Vue;

        createApp({
            setup() {
                const cards = ref([
                    { id: 1, text: '第一张卡片', color: 'yellow', top: 20, left: 15, selected: false, isDragging: false },
                    { id: 2, text: '第二张卡片', color: 'blue', top: 100, left: 100, selected: false, isDragging: false }
                ]);
                function startDrag(card) {

                    // card.isDragging = true;
                }

                function stopDrag(card) {
                    // card.isDragging = false;
                }

                function editCard(card) {
                    card.text = prompt('编辑卡片文本:', card.text) || card.text;
                }

                function selectCard(card) {
                    card.selected = !card.selected;
                }

                function deleteCard(card) {
                    const index = cards.value.indexOf(card);
                    cards.value.splice(index, 1);
                }

                return { cards, editCard, selectCard, deleteCard, startDrag, stopDrag };
            }
        }).mount('#app');
    </script>
</body>
</html>
